micronaut:
  server:
    port: -1

# H2 in-memory database configuration for testing
datasources:
  default:
    url: "jdbc:h2:mem:testDb;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL"
    driver-class-name: org.h2.Driver
    username: sa
    password: ""
    pool-name: HikariPool-Test
    maximum-pool-size: 20
    minimum-idle: 5
    connection-timeout: 30000
    idle-timeout: 600000
    max-lifetime: 1800000

gateway:
  mybatis:
    mapper-locations: src/test/resources/mappers
    cache-enabled: false
    lazy-loading-enabled: false
    default-statement-timeout: 30

  endpoint-config-path: src/test/resources/test-endpoints.yml

  security:
    api-key-header: Authorization
    api-keys:
      - secret-key

  sql-logging:
    enabled: true
    log-parameters: true
    log-timing: true
    slow-query-threshold-ms: 1000

  virtual-threads:
    enabled: true
    executor-name: gateway-virtual-executor

# Logging configuration for tests
logger:
  levels:
    querygate: DEBUG
    querygate.interceptor: DEBUG
    SQL_LOGGER: DEBUG
    org.apache.ibatis: INFO
    com.zaxxer.hikari: INFO
